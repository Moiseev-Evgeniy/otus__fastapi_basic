#  Scoring service

## Открыть приложение (локально)

Приложение по умолчанию доступно по адресу http://localhost:8000/  
Документация API методов доступна по адресу http://localhost:8000/docs

## Настройка

Необходимо создать файл `.env` в корне проекта и заполнить его по примеру `.env.template`

Для установки зависимостей:

```bash
poetry install
```
Для добавления зависимостей:

```bash
poetry add <package_name>
```
Для обновления зависимостей:

```bash
poetry lock
poetry install
``` 

## Миграции

Для работы с alembic необходимо находиться в директории `src`.
Локально для работы с alembic необходимо отключить VPN.

Для генерации миграции:

```bash
alembic revision --autogenerate -m "migration_name"
```

После чего необходимо в миграции вручную изменить 'schema' на схему из settings файла settings.py(по умолчанию 'public')

Для применения миграции:

```bash
alembic upgrade head
```
Для отката миграции:

```bash
alembic downgrade -1
```
## Мэйкфайл

Для удобства работы с проектом в корне проекта находится Makefile со следующими командами:

```bash
make lint # запуск линтера
make test # запуск тестов
make format # запуск форматирования кода
make lint-fix # запуск линтера с фиксом ошибок
make check # запуск линтера, форматера и тестов
make check-fix # запуск линтера с фиксом ошибок, форматера и тестов
make run_db # запуск контейнера с базой данных
```
